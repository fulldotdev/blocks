---
interface Props {
  _block?: string
  [key: string | number | symbol]: any
}

const packageBlocks = await Astro.glob('../components/blocks/**/*.astro')
const userBlocks = await Astro.glob('src/components/blocks/**/*.astro')
const components = [...userBlocks, ...packageBlocks]

const { _block, ...rest } = Astro.props

const Component = components.find((component) => {
  const fileName = component.default.moduleId?.split('/').pop()
  const componentName = fileName?.split('.')[0]
  return componentName === _block
})?.default
---

{Component && <Component {...rest} />}
